!function(t){"use strict";var e=function(e){bg.IntroTutorial.getState(function(i){if(i.enabled&&document.location.host.toLowerCase().includes(i.domain)){var o=i.isInContext?t.InContextIntroTutorialDialogOptions:t.VaultIntroTutorialDialogOptions;e(i,o)}})};Topics.get(Topics.SITE_NOTIFICATION_STATE).subscribe(function(t){var i=null;function o(t){i&&t&&LPFrame.css({id:i.getDialogID(),css:{top:t.top+45,left:t.left+t.infieldOffset+25}})}function n(t){i?(Topics.get(Topics.INFIELD_FRAME_POSITION_CHANGED).unsubscribe(o),bg.IntroTutorial.getState(function(e){"add_first_site"!==e.inContextOnboardingStep&&(i.close(!0),i=null,t&&t())})):t&&t()}e(function(t,e){var o=LPSiteService.getSite(t.domain);if(o.isLoggedIn(document)){if(bg.IntroTutorial.setState({firstLogin:!1}),!LPFrame.hasDialogs()&&(i=t.isLoginTheLastPassWay?LPFrame.openDialog(e.name,{addHide:!0,textChoice:"loginTheLastPassWay",arrow:e.getArrowOptions()},{css:e.getCssOptions()}):LPFrame.openDialog(e.name,{addHide:!0,textChoice:"siteLanding",arrow:e.getArrowOptions()},{css:e.getCssOptions()}))){var n=e.getTrackElementOptions();n.element=o.getTrackingEl(document),i.trackElement(n)}}else t.firstLogin?o.logMeOut(document,e.name):t.isAllSet&&bg.IntroTutorial.completeTutorial({textChoice:"completed"})}),Topics.get(Topics.SITE_NOTIFICATION).subscribe(function(i){var o=bg.get("LPContentScriptFeatures").ezpass_test?"saveSiteEzPass":"saveSite";e(function(e,n){bg.IntroTutorial.setState({inContextOnboardingStep:"add_site_to_lastpass"}),setTimeout(function(){bg.sendLpImprove("onboardingtour::displayed_onboarding_save_a_site",{version:"incontext"}),i.getInterface().LPDialog.openDialog(n.name,{addHide:!0,siteName:t.defaultData.name,textChoice:o,parentDialog:"contentScriptSite",css:{position:"absolute",top:"100%","margin-top":"10px","margin-right":0,right:0},arrow:{orientation:"top",positionTarget:"#submit"}})},1e3)})}),Topics.get(Topics.INFIELD_NOTIFICATION_OPENED).subscribe(function(t){e(function(e,s){n(function(){var n=e.inContextOnboardingStep;n&&"add_first_site"!==n&&(i=LPFrame.openDialog(s.name,{addHide:!0,textChoice:"selectYourSite",arrow:s.getArrowOptions()},{css:{width:"auto",height:"auto","min-width":"168px"}})),Topics.get(Topics.INFIELD_FRAME_POSITION_CHANGED).subscribe(o),o(t)})})}),Topics.get(Topics.INFIELD_NOTIFICATION_FILLED).subscribe(function(){e(function(t,e){t.enabled&&(bg.IntroTutorial.setState({isLoginTheLastPassWay:!1}),bg.IntroTutorial.completeTutorial({textChoice:"completed",siteName:t.domain}))})}),Topics.get(Topics.INFIELD_NOTIFICATION_CLOSED).subscribe(function(){e(function(t,e){n()})})})}(IntroTutorialDialogOptions);
//# sourceMappingURL=sourcemaps/IntroTutorial/introTutorialContentScript.js.map
